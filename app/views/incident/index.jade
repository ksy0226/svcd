extends ../layouts/default
block head
    title  1-2 처리진행현황 목록
    // Plugins css
    link(href='/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.css', rel='stylesheet')
    link(href='/plugins/multiselect/css/multi-select.css', rel='stylesheet', type='text/css')
    link(href='/plugins/select2/select2.css', rel='stylesheet', type='text/css')
    link(href='/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css', rel='stylesheet')
    link(href='/plugins/timepicker/bootstrap-timepicker.min.css', rel='stylesheet')
    link(href='/plugins/mjolnic-bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css', rel='stylesheet')
    link(href='/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css', rel='stylesheet')
    link(href='/plugins/bootstrap-daterangepicker/daterangepicker.css', rel='stylesheet')
    // summernot
    link(href='/plugins/summernote/dist/summernote.css', rel='stylesheet')
    link(href='/plugins/switchery/switchery.min.css', rel='stylesheet')
    link(href='/assets/css/bootstrap.min.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/core.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/icons.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/components.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/pages.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/menu_light.css', rel='stylesheet', type='text/css')
    link(href='/assets/css/responsive.css', rel='stylesheet', type='text/css')
    script(src='/assets/js/modernizr.min.js')
    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //if lt IE 9
    script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
    script(src='https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js')

    // jQuery
    script(src='/assets/js/jquery.min.js')
    script(src='/assets/js/bootstrap.min.js')

    script(src='/assets/js/detect.js')
    script(src='/assets/js/fastclick.js')
    script(src='/assets/js/jquery.slimscroll.js')
    script(src='/assets/js/jquery.blockUI.js')
    script(src='/assets/js/waves.js')
    script(src='/assets/js/wow.min.js')
    script(src='/assets/js/jquery.nicescroll.js')
    script(src='/assets/js/jquery.scrollTo.min.js')
    script(src='/plugins/switchery/switchery.min.js')
    script(src='/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js')
    script(type='text/javascript', src='/plugins/multiselect/js/jquery.multi-select.js')
    script(type='text/javascript', src='/plugins/jquery-quicksearch/jquery.quicksearch.js')
    script(src='/plugins/select2/select2.min.js', type='text/javascript')
    script(src='/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js', type='text/javascript')
    script(src='/plugins/bootstrap-inputmask/bootstrap-inputmask.min.js', type='text/javascript')

    
    script(type='text/javascript').
        //객체값을 javascript에 매핑
        var incidentObj = !{JSON.stringify(incident).replace(/<\//g, '<\\/')};
        
    //script(src='/isu/js/incident/index.js')
    
    script(type='text/javascript').
        var	dataCnt = 0;
        var	rowIdx = 3;
        var inCnt = 3;
        var	dataObj = null;
        var addlist = "";
        

        $(document).ready(function () {
            dataObj= incidentObj;
            $('#moreView').on('click',function(){
                moreView();
            });
        });
        
        function moreView(){
            //alert("dataObj.length"+dataObj.length); //303
            if(rowIdx < dataObj.length){
                if((rowIdx+inCnt) < dataObj.length){
                    dataCnt = rowIdx + inCnt;
                }else{
                    dataCnt = dataObj.length;
                } 
            }
            
            for(var i=rowIdx ; i < dataCnt ; i++){
                alert("rowIdx "+rowIdx);
                alert("dataCnt "+dataCnt);
                var addList = "";
                addList += "<div class='col-lg-12'>";
                addList += "					<div class='card-box'>";
                addList += "						<div class='forum-container'>";
                addList += "							<div class='forum-item'>";
                addList += "								<div class='row'>";
                addList += "									<div class='col-md-1 forum-info'>";
                addList += "										<span class='btn-outline outline-pink'>접수</span>";
                addList += "									</div>";
                addList += "									<div class='col-md-11'>";
                addList += "										<div class='forum-sub-title'>";
                addList += "											<span class='text-primary'><b>"+dataObj[i].manager_nm+"</b></span>";
                addList += "											<span class='p-w-xs'></span>";
                addList += "										</div>";
                addList += "										<a href='/incident/viewDetail' class='forum-item-title'>";
                addList += "											<i class='md md-desktop-windows'></i>"+dataObj[i].title+"";
                addList += "										</a>";
                addList += "									</div>";
                addList += "									<div class='col-md-12'>";
                addList += "										<div class='forum-content truncate1 fh-60' style='word-wrap: break-word;'>";
                addList += "											<a href='/incident/viewDetail'></a>";
                addList += "										</div>";
                addList += "										<a href='/incident/viewDetail' class='text-muted text-more'>더보기</a>";
                addList += "										<div class='forum-level'>";
                addList += "											<p class='text-muted font-13'><b>서비스 만족도:</b>";
                addList += "											    <span class='m-l-15'>";
                addList += "												    <i class='md md-star text-warning'></i>";
                addList += "												    <i class='md md-star text-warning'></i>";
                addList += "												    <i class='md md-star text-warning'></i>";
                addList += "												    <i class='md md-star text-warning'></i>";
                addList += "												    <i class='md md-star text-muted'></i>";
                addList += "												</span>";
                addList += "											</p>";
                addList += "											<p></p>";
                addList += "										</div>";
                addList += "									</div>";
                addList += "								</div>";
                addList += "							</div>";
                addList += "						</div>";
                addList += "					</div>";
                addList += "				</div>";

                //alert("addList : " + addList);
                
                $("#more_list").append(addList);
                
                rowIdx++;
            }
            $("#more_view").remove();
            $('#more_list').append("<div class='col-lg-12'><div class='card-box'></div></div>");  
     
        }

.col-lg-12
                        .card-box
                            p
                                a.text-muted.text-more(id='moreView') 더보기

block content
    // ==============================================================
    // Start right Content here
    // ==============================================================
    .content-page
        // Start content
        .content
            .container
                // Page-Title
                .row
                    .col-sm-12
                        .page-title-box
                            ol.breadcrumb.pull-right
                                li
                                    a(href='#') Home
                                li
                                    a(href='#') 문의 및 담당자
                                li.active 처리진행현황
                            h4.page-title 처리진행현황 목록
                // start Search Area
                .row
                    .col-lg-12
                        .card-box
                            form.form-horizontal.group-border-dashed(action='#')
                                .form-group
                                    label.col-sm-2.control-label 진행구분
                                    .col-sm-2
                                        select.form-control
                                            option(value='접수대기') 접수대기
                                            option(value='처리중') 처리중
                                            option(value='미평가') 미평가
                                            option(value='완료') 완료
                                            option(value='보류') 보류

                                    label.col-sm-2.control-label 검색기간
                                    .col-sm-2
                                        select.form-control
                                            option 최근1주일
                                            option 최근1개월
                                            option 최근3개월
                                            option 최근6개월
                                            option 최근1년
                                            option 전체검색
                                .form-group.m-b-0
                                    label.col-sm-2.control-label 제목
                                    .col-sm-8
                                        input.form-control(type='text')
                                    .col-sm-2
                                        button.btn.btn-primary(type='button')
                                            | 조회 
                                            i.fa.fa-search.m-l-5
                // end Search Area
                // start List Area
            - if (incident.length > 0) {
                - for( var i = 0 ; length = 3 > i ; i++ ){
                .row
                    .col-lg-12
                        .card-box
                            // start 처리진행현황
                            .forum-container
                                .forum-item
                                    .row
                                        .col-md-1.forum-info
                                            span.btn-outline.outline-pink
                                                | 접수
                                        .col-md-11
                                            .forum-sub-title
                                                span.text-primary
                                                    b #{incident[i].manager_nm}
                                                    | #{incident[i].receipt_date}   //날짜 처리 필요함
                                                span.p-w-xs
                                            a.forum-item-title(href='/incident/viewDetail')
                                                i.md.md-desktop-windows
                                                | #{incident[i].title}
                                                
                                        .col-md-12
                                            .forum-content.truncate1.fh-60
                                                a(href='/incident/viewDetail')
                                                    | #{incident[i].content}
                                            a.text-muted.text-more(href='/incident/viewDetail') 더보기
                                            .forum-level
                                                p.text-muted.font-13
                                                    b 서비스 만족도:
                                                    span.m-l-15
                                                        i.md.md-star.text-warning
                                                        i.md.md-star.text-warning
                                                        i.md.md-star.text-warning
                                                        i.md.md-star.text-warning
                                                        i.md.md-star.text-muted
                                                p

                - }
            - }else{
                
            - }   

                #more_view.row
                    .col-lg-12
                        .card-box
                            p
                                a.text-muted.text-more(id='moreView') 더보기
                #more_list.row

              
                                    
        // end content

        footer.footer.text-right
            | 2017 © ISU Group.




        // dotdotdot
        script(src='/plugins/dotdotdot/jquery.dotdotdot.min.js')

        script.
            $(document).ready(function (){
                $(".truncate").dotdotdot({
                    watch: 'window'
                });
                $(".truncate1").dotdotdot({
                    watch: 'window',
                    ellipsis: ' ... '
                });
                $(".truncate2").dotdotdot({
                    watch: 'window',
                    wrap: 'letter'
                });
            });

            


